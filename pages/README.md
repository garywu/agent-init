# Documentation Site

[![Built with Starlight](https://astro.badg.es/v2/built-with-starlight/tiny.svg)](https://starlight.astro.build)

This is a Starlight documentation site configured with all the best practices from agent-init for GitHub Pages deployment.

## Key Features

✅ **Critical astro sync** command in build process  
✅ **Relative paths** for all internal links  
✅ **Base path configuration** for GitHub Pages  
✅ **Autogenerated sidebars** for better maintainability  
✅ **GitHub Actions workflow** for automated deployment  
✅ **Link testing scripts** for validation  

## Quick Start

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **Start development server:**
   ```bash
   npm run dev
   ```

3. **Build for production:**
   ```bash
   npm run build
   ```

## Configuration

Before deploying, update the following in `astro.config.mjs`:

```javascript
site: 'https://YOUR_USERNAME.github.io',
base: '/YOUR_REPOSITORY_NAME',
```

Also update the GitHub URL in the hero actions and social links.

## Project Structure

```
.
├── public/
├── src/
│   ├── assets/
│   ├── content/
│   │   ├── docs/
│   │   │   ├── index.mdx              # Homepage
│   │   │   ├── guides/                # Getting started guides
│   │   │   ├── reference/             # API reference
│   │   │   └── best-practices/        # Development best practices
│   │   └── config.ts
│   └── styles/
│       └── custom.css                 # Custom styling
├── tests/                             # Link validation scripts
├── .github/
│   └── workflows/
│       └── deploy.yml                 # GitHub Pages deployment
├── astro.config.mjs
├── package.json
└── tsconfig.json
```

## Commands

| Command                   | Action                                           |
| :------------------------ | :----------------------------------------------- |
| `npm install`             | Installs dependencies                            |
| `npm run dev`             | Starts local dev server at `localhost:4321`      |
| `npm run build`           | Build with astro sync, check, and build          |
| `npm run build:fast`      | Build with astro sync and build (skip checks)   |
| `npm run preview`         | Preview your build locally                       |
| `npm run sync`            | Run astro sync manually                          |
| `npm run check`           | Run astro check for TypeScript errors            |

## Testing

### Local Link Testing
```bash
npm run dev
./tests/test-links.sh
```

### Production Testing
```bash
./tests/test-production.sh YOUR_USERNAME YOUR_REPOSITORY_NAME
```

## Deployment

1. Push to GitHub
2. Enable GitHub Pages in repository settings (use GitHub Actions as source)
3. The workflow will automatically deploy on push to main branch

## Critical Notes

- **Always use relative paths** (`./`, `../`) for internal links
- **Never skip `astro sync`** before building
- **Test locally** with the base path before deploying

## Common Issues

If links return 404 in production:
1. Check that base path in astro.config.mjs matches your repository name exactly
2. Verify all internal links use relative paths
3. Ensure `astro sync` is included in the build command
4. Check that GitHub Pages is properly configured

For detailed troubleshooting, refer to the agent-init documentation guides:
- [Documentation Site Setup](https://github.com/garywu/claude-init/blob/main/docs/documentation-site-setup.md)
- [GitHub Pages + Astro Troubleshooting](https://github.com/garywu/claude-init/blob/main/docs/github-pages-astro-troubleshooting.md)